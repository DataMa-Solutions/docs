<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Datama documentation - {{ page.title }}</title>
    <link rel="icon" type="image/png" sizes="32x32"
          href="{{site.url}}/{{site.baseurl}}/assets/images/favicon-32x32.png"/>
    <link rel="icon" type="image/png" sizes="32x32"
          href="{{site.url}}/{{site.baseurl}}/assets/images/favicon-16x16.png"/>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Datama documentation - {{ page.description }}"/>
    <meta name="og:title" content="Datama documentation - {{ page.title }}">
    <meta name="og:type" content="website">
    {% if page.img_url != null %}
    <meta name="og:image" content="{{site.url}}/{{site.baseurl}}{{ page.img_url }}">
    <meta name="og:video" content="{{site.url}}/{{site.baseurl}}{{ page.img_url }}">
    <meta name="og:url" content="{{site.url}}/{{site.baseurl}}{{ page.img_url }}">
    <meta name="og:image:width" content="{{ page.img_width }}">
    <meta name="og:image:height" content="{{ page.img_height }}">
    <meta property="og:image:type" content="{{ page.img_type }}"/>
    <meta content="video.other" property="og:type"/>
    {% endif %}
    <meta name="google-site-verification" content="TUNtfUemY95_1kk74l6s9zMJE_bHp3SxLHcbu5eiow0"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
          integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ=="
          crossorigin="anonymous" referrerpolicy="no-referrer"/>
    <link rel="stylesheet" href="{{site.url}}/{{site.baseurl}}/assets/css/style.css">
    <link rel="stylesheet" href="{{site.url}}/{{site.baseurl}}/assets/css/reading-progress.css">
    <script src="{{site.url}}/{{site.baseurl}}/assets/js/jquery.js"></script>
    <script src="{{site.url}}/{{site.baseurl}}/assets/js/cookies.js"></script>
    <script src="{{site.url}}/{{site.baseurl}}/assets/js/sws.js" type="text/javascript"></script>
</head>
<body>
 
{% include navigation.html nav=site.data.navigation search=1 %}
<main>
    {% include header.html %}
    <div class="page-container">
        <article class="post">
            <header class="post-header">
            <h1 class="page-title">{{ page.title }}</h1>
                <nav class="breadcrumb-nav">
                {% assign current_url = page.url %}
                {% assign trail = "" | split: "" %}

                {% assign nav = site.data.navigation %}
                {% assign found = false %}

                {% assign max_depth = 5 %}
                {% assign stack = nav %}
                {% assign path = "" | split: "" %}

                {% assign level1s = nav %}
                {% for level1 in level1s %}
                    {% if found %}{% break %}{% endif %}
                    {% assign path = level1 | jsonify | split: "" %}
                    {% assign current_path = "" | split: "" %}
                    {% assign current_path = current_path | push: level1 %}

                    {% if level1.link == current_url %}
                    {% assign trail = current_path %}
                    {% assign found = true %}
                    {% break %}
                    {% endif %}

                    {% if level1.subnav %}
                    {% for level2 in level1.subnav %}
                        {% assign current_path = current_path | slice: 0,1 | push: level2 %}
                        {% if level2.link == current_url %}
                        {% assign trail = current_path %}
                        {% assign found = true %}
                        {% break %}
                        {% endif %}

                        {% if level2.subnav %}
                        {% for level3 in level2.subnav %}
                            {% assign current_path = current_path | slice: 0,2 | push: level3 %}
                            {% if level3.link == current_url %}
                            {% assign trail = current_path %}
                            {% assign found = true %}
                            {% break %}
                            {% endif %}

                            {% if level3.subnav %}
                            {% for level4 in level3.subnav %}
                                {% assign current_path = current_path | slice: 0,3 | push: level4 %}
                                {% if level4.link == current_url %}
                                {% assign trail = current_path %}
                                {% assign found = true %}
                                {% break %}
                                {% endif %}

                                {% if level4.subnav %}
                                {% for level5 in level4.subnav %}
                                    {% assign current_path = current_path | slice: 0,4 | push: level5 %}
                                    {% if level5.link == current_url %}
                                    {% assign trail = current_path %}
                                    {% assign found = true %}
                                    {% break %}
                                    {% endif %}
                                {% endfor %}
                                {% endif %}
                            {% endfor %}
                            {% endif %}
                        {% endfor %}
                        {% endif %}
                    {% endfor %}
                    {% endif %}
                {% endfor %}

                <div class="breadcrumb-path">
                    <a href="{{ '/' | relative_url }}" class="home-icon" aria-label="Home">
                    <i class="fas fa-home"></i>
                    </a>
                    {% if trail.size > 0 %}
                    <span class="breadcrumb-separator">›</span>
                    {% for item in trail %}
                        {% if forloop.last %}
                        <span class="current">{{ item.name }}</span>
                        {% else %}
                        <a href="{{ item.link | relative_url }}">{{ item.name }}</a>
                        <span class="breadcrumb-separator">›</span>
                        {% endif %}
                    {% endfor %}
                    {% endif %}
                </div>
                </nav>


            </header>
            <div class="post-content-wrapper">
                <div class="post-content">
                    {{ content }}
                </div>

                <aside class="page-toc">
                    <div class="toc-container">
                        <h3 style="font-weight:600;">On this page</h3>
                        <nav class="toc-nav">
                            <ul id="toc-list"></ul>
                        </nav>
                    </div>
                </aside>
            </div>
        </article>
    </div>
</main>
<script src="{{site.url}}/{{site.baseurl}}/assets/js/main.js"></script>
<script src="{{site.url}}/{{site.baseurl}}/assets/js/reading-progress.js"></script>
<style>
    .page-container {
        max-width: 1400px;
        margin: 0;
    }

    .post-content-wrapper {
        display: grid;
        grid-template-columns: 1fr 300px;
        gap: 2rem;
    }

    .page-toc {
        position: sticky;
        height: 80vh; /* limite la hauteur pour que le scroll apparaisse */
        overflow-y: auto; /* active le scroll vertical */
        padding: 1rem;
        border-left: 1px solid #e1e4e8;
        margin-left: 1rem;
        scrollbar-width: thin;         /* Firefox */
        scrollbar-color: #ccc transparent;   
     }

     .page-toc::-webkit-scrollbar {
    width: 6px;
    }
    .page-toc::-webkit-scrollbar-thumb {
        background-color: #ccc;
        border-radius: 3px;
    }
    .page-toc::-webkit-scrollbar-track {
        background: transparent;
    }

    .toc-container {
        font-size: 0.9rem;
    }

    .toc-nav ul {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .toc-nav li {
        margin: 0.5rem 0;
    }

    .toc-nav a {
        color: #666;
        text-decoration: none;
        transition: color 0.2s;
        padding: 2px 0;
        display: block;
    }

    /* Indentation pour les différents niveaux de titres */
    .toc-nav li[data-level="h1"] {
        padding-left: 0;
        padding-top: 6px;
    }

    .toc-nav li[data-level="h2"] {
        padding-left: 1rem;
        padding-top: 1px;
    }
    .toc-nav li[data-level="h2"] a {
        font-weight: 450 !important; /* Force le font-weight */
    }

    .toc-nav li[data-level="h3"] {
        padding-left: 2rem;
        margin-bottom: -7px;
    }
    .toc-nav li[data-level="h3"] a {
        font-weight: 300 !important; /* Force le font-weight */
    }

    .toc-nav li[data-level="h4"] {
        padding-left: 3rem;
        margin-bottom: -7px;
        font-size: smaller;
    }
    .toc-nav li[data-level="h4"] a {
        font-weight: 200 !important; /* Force le font-weight */
    }

    .toc-nav a:hover,
    .toc-nav a.active {
        color: #000;
    }

    .toc-nav a.active {
        color: #0969da;
        font-weight: 500;
    }

    @media (max-width: 768px) {
        .post-content-wrapper {
            grid-template-columns: 1fr;
        }

        .page-toc {
            display: none;
        }
    }

    .breadcrumb-nav {
        margin-bottom: 20px;
        font-size: 0.9em;
        color: #666;
    }
    .breadcrumb {
    margin-top: 0.5rem;
    margin-bottom: 1rem;
    font-size: 0.9rem;
    color: #586F70;
    display: flex;
    flex-wrap: wrap;
    align-items: center;
    gap: 6px;
    font-family: "Open Sans", sans-serif;
    }

    .breadcrumb span {
    white-space: nowrap;
    }

    .breadcrumb .current {
    font-weight: 600;
    color: #333;
    }

    .breadcrumb .sep {
    color: #bbb;
    }

    .breadcrumb-path {
        a {
            text-decoration: none;

            &:hover {
                text-decoration: underline;
            }
        }
    }

    .breadcrumb-separator {
        margin: 0 8px;
        color: #999;
    }

    .breadcrumb-path a:first-child {
    font-size: 1.2rem;
    text-decoration: none;
    margin-right: 4px;
    }

    .breadcrumb-path a:first-child:hover {
    text-decoration: underline;
    }

    .breadcrumb-path .home-icon {
    color: $datagreen;
    font-size: 1rem;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 4px;
    }

    .breadcrumb-path .home-icon:hover {
    color: darken($datagreen, 10%);
    text-decoration: none;
    }

    .breadcrumb-path .fas.fa-home {
    margin-right: 4px;
    }


</style>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        // Get all headings in the content
        const headings = document.querySelectorAll('.post-content h1, .post-content h2, .post-content h3, .post-content h4');
        const tocList = document.getElementById('toc-list');
        const tocLinks = [];

        // Create TOC items
        headings.forEach(heading => {
            const link = document.createElement('a');
            link.textContent = heading.textContent;
            link.href = `#${heading.id}`;

            const listItem = document.createElement('li');
            // Ajouter l'attribut data-level pour l'indentation
            listItem.setAttribute('data-level', heading.tagName.toLowerCase());
            listItem.appendChild(link);
            tocList.appendChild(listItem);
            tocLinks.push(link);
        });

        // Highlight current section while scrolling
        function updateActiveSection() {
            const viewportHeight = window.innerHeight;
            const tenPercentOfViewport = viewportHeight * 0.1;
            const scrollPosition = window.scrollY + tenPercentOfViewport;

            // Remove active class from all links first
            tocLinks.forEach(link => link.classList.remove('active'));

            // Find the last heading that is above the 10% mark of the viewport
            let activeIndex = -1;

            headings.forEach((heading, index) => {
                if (heading.offsetTop <= scrollPosition) {
                    activeIndex = index;
                }
            });

            // Add active class to the appropriate link
            if (activeIndex >= 0 && tocLinks[activeIndex]) {
                tocLinks[activeIndex].classList.add('active');
            }
        }

        // Update active section on scroll and hash change
        window.addEventListener('scroll', updateActiveSection);
        window.addEventListener('hashchange', updateActiveSection);

        // Initial update
        updateActiveSection();
    });
</script>
</body>
</html>
