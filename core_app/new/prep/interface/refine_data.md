---
title: Prep - Refine data
description: This section helps you to refine your data in DataMa Prep
layout: page
---


> **This section helps you to refine your data in DataMa Prep**

Find [here]({{site.url}}/{{site.baseurl}}/core_app/new/prep/dataset.html) how you need to format your dataset for DataMa solutions.
<br>

Here is the available actions you can do so far in DataMa Prep to refine your dataset:
- [Clean](#clean)
- [Append](#append)
- [Filter](#filter)
- [Pivot & Unpivot](#pivot--unpivot)
- [Unpivot](#unpivot)

<br>

> ### Clean ###

**Clean action allows you to edit order and types of your columns.**

<b> Why ?</b>

Because you might need to append later on this dataset with another one, and you will have to coordinate both of their characteristics (such as the name of the metrics and dimensions, their format etc) so that they match in your dataflow afterwards. This is necessary to create a functionnal and interesting market equation, which is the foundation of DataMa's solutions.


<b> How to use it ?</b>

You can adapt your dataset and transform it in the right format so that its lines and columns concur with other datasets.

In the action menu, you can select the "Clean" option to use it.

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/Cleanstep2.png"/></center>

Once the block is created you will be able to see all of the existing columns generated by the previous action.
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/Cleanstep3.png"/></center>

<b> Configuration explain</b> 

When you click on the Clean action block, you'll be able to see the configuration menu on the sidebar as a list of columns corresponding to the previous action on a dataset. Thus, you'll be able to:
- Re order dataset's columns by using Drag and Drop on items
- Rename a column by editing directly in the item it name
- Remove a column from the dataset using the &times; button

You'll also be able to edit a column type by using the select contain on items. If the conversion is not possible, for example converting a product name such as "hair dryer" to a date type, the clean action will show a warning.

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/clean_types.png"/></center>

In addition, DataMa prep gives you the possibility to create Calculated Field using the **Create a calculated field** button. 

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/create_calculated_field.png"/></center>



This a powerfull tool to create columns using conditionals or aggregation functions without the need to manually edit your dataset.
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/calculated_field_preview1.png"/></center>


Once you're done make sure to click on the "Ok" button to validate the creation of the calculated column.

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/calculated_field_preview2.png"/></center>


<br>

> ### Append ###

**Append action allow you to merge two source flow in one.**

<b>  Why ? </b> 

DataMa Prep allow you to import data from multiple source to a single output ready for DataMa Core's solutions. In order to join our multiple source we need an Append action.


<b>  How to use it ?</b> 

For instance, if you have input a Google sheet and a Google trend file, you might want to make a fusion of both of their data.

To do so, in the action menu of the block where you want to merge datasets select "Append".
It will automatically merge datasets.

On the sidebar, you can also notice the summary of each of the dataset's columns.

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/Appendstep1.png"/></center>


If there are some columns shared between both dataset, it will merge them instead of duplicate them (careful it's case sensitive). All non-shared columns of each 
dataset will be seed with NULL value.

This is not a JOIN, it acts like puting one dataset below the other. 

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/prep_appendQuery.png"   style="width:450px;"/></center>


<br>


> ### Filter ###


**Filter action allow you to filter data in columns.**

<b>  Why ?</b> 

Let's say you want , from your dataset, to fetch products where the "product name" contains 'Hair' and the "price" is above $20. The filter action helps you do such tasks so you don't need to do them manualy.

<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/show_filters.png"/></center>


<b>  How to use it ?</b> 

By using the button "new filter" you must first choose the desired column.

Then make sure to choose the appropriate type of filter.
For text base data the currently availbalbe filters are:
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/text_filters2.png"/></center>


As for numbers and dates:
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/comp_filters.png"/></center>

Finally you have to add one or more elements to be used to apply the filter on the column.

A filter action holds a single filter condition on each field and works by applying a logical OR to the column data. It's possible to chain multiple filters which will be the equivalent of using a logical AND on each simillar column.

Once you have some filters applied you can see them by their column name. By clicking on it you open it and see a description of the filter.
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/show_filters.png"/></center>

Sometimes you can see the following error message "It seems that there are too many unique values" it means that the number of unique values in the dataset is higher than the limit set by DataMa.

This was implemented to avoid application performance problems.

It has the effect of not offering the unique values in the filter value selector.

<br>


> ### Pivot & Unpivot ###

**You might want to pivot and unpivot your dataset in DataMa PREP.**


What is that for?
## Pivot operations
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/pivot.png"/></center>


A **pivot table** is a table of grouped values that aggregates the individual items of a more extensive table within one or more discrete categories. This summary might include sums, averages, or other statistics.


## UnPivot example
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/unpivot_dss.png"/></center>


We have a column gender containing only two unique values, {males, females}.
We want to split sessions according to those values. To do so, we will unpivot the column gender using sessions as an aggregates column.
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/unpivot.png" style="width:500px;"/></center>


For example, this unpivot configuration creates two columns {Sessions.female and Sessions.males} containing the same values but in two distinct columns.
<center><img src="{{site.url}}/{{site.baseurl}}/core_app/new/prep/interface/images/unpivoted_column.png"/></center>


Congrats! Your dataset is ready to be uploaded in DataMa's solution!

To see how to save and share your dataflow, click [here]({{site.url}}/{{site.baseurl}}/core_app/prep/header/save.html)
